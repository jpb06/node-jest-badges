# node-jest-badges

[![Open in Visual Studio Code](https://open.vscode.dev/badges/open-in-vscode.svg)](https://open.vscode.dev/jpb06/node-jest-badges)
![npm bundle size](https://img.shields.io/bundlephobia/min/node-jest-badges)
[![Lines of Code](https://sonarcloud.io/api/project_badges/measure?project=jpb06_node-jest-badges&metric=ncloc)](https://sonarcloud.io/summary/new_code?id=jpb06_node-jest-badges)
[![Technical Debt](https://sonarcloud.io/api/project_badges/measure?project=jpb06_node-jest-badges&metric=sqale_index)](https://sonarcloud.io/summary/new_code?id=jpb06_node-jest-badges)
[![Maintainability Rating](https://sonarcloud.io/api/project_badges/measure?project=jpb06_node-jest-badges&metric=sqale_rating)](https://sonarcloud.io/dashboard?id=jpb06_node-jest-badges)
[![Security Rating](https://sonarcloud.io/api/project_badges/measure?project=jpb06_node-jest-badges&metric=security_rating)](https://sonarcloud.io/dashboard?id=jpb06_node-jest-badges)
[![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=jpb06_node-jest-badges&metric=reliability_rating)](https://sonarcloud.io/dashboard?id=jpb06_node-jest-badges)
![Snyk Vulnerabilities for npm package](https://img.shields.io/snyk/vulnerabilities/npm/node-jest-badges?label=snyk%20vulnerabilities)
[![Bugs](https://sonarcloud.io/api/project_badges/measure?project=jpb06_node-jest-badges&metric=bugs)](https://sonarcloud.io/summary/new_code?id=jpb06_node-jest-badges)
[![Vulnerabilities](https://sonarcloud.io/api/project_badges/measure?project=jpb06_node-jest-badges&metric=vulnerabilities)](https://sonarcloud.io/summary/new_code?id=jpb06_node-jest-badges)
[![Code Smells](https://sonarcloud.io/api/project_badges/measure?project=jpb06_node-jest-badges&metric=code_smells)](https://sonarcloud.io/dashboard?id=jpb06_node-jest-badges)
[![Duplicated Lines (%)](https://sonarcloud.io/api/project_badges/measure?project=jpb06_node-jest-badges&metric=duplicated_lines_density)](https://sonarcloud.io/dashboard?id=jpb06_node-jest-badges)
[![Coverage](https://sonarcloud.io/api/project_badges/measure?project=jpb06_node-jest-badges&metric=coverage)](https://sonarcloud.io/dashboard?id=jpb06_node-jest-badges)
![Coverage](./badges/coverage-jest%20coverage.svg)
![Github workflow](https://img.shields.io/github/workflow/status/jpb06/node-jest-badges/checks?label=last%20workflow&logo=github-actions)
![Last commit](https://img.shields.io/github/last-commit/jpb06/node-jest-badges?logo=git)

## :zap: Badges for everyone!

Let's just imagine you want to display some information about your testing coverage and you're using jest as a testing framework. Look no further!

## :zap: Badges?

This package generates the following badges for you, based on the coverage report generated by jest, using instanbul.

| Badge                                                   | Description                                    |
| ------------------------------------------------------- | ---------------------------------------------- |
| ![Branches](./badges/coverage-branches.svg)             | Percentage of DD-paths followed during tests   |
| ![Functions](./badges/coverage-functions.svg)           | Percentage of functions executed within tests  |
| ![Lines](./badges/coverage-lines.svg)                   | Percentage of lines covered by tests           |
| ![Statements](./badges/coverage-statements.svg)         | Percentage of statements executed within tests |
| ![Jest coverage](./badges/coverage-jest%20coverage.svg) | Average of the above coverage percentages      |

## :zap: Github action

If you want to integrate this to your CI/CD, you have a [github action available for this](https://github.com/marketplace/actions/jest-badges-generation-action).

## :zap: Requirements

### :diamonds: Jest

Well, let's just start by stating the obvious here. Yes, you will need [jest testing library](https://jestjs.io/) to use this package.

## :zap: Setup

### :diamonds: Install

```shell
yarn add -D node-jest-badges
```

or

```shell
npm i -D node-jest-badges
```

### :diamonds: Jest configuration

You will need to add json-summary to coverage reporters in jest config:

```javascript
module.exports = {
   coverageReporters: ["json-summary"];
};
```

## :zap: Usage

You have two ways to generate coverage badges: cli and node. Both will create a 'badges' folder at project root where .svg files will be written.

### :diamonds: Cli

You can add a script to your package.json like so:

```shell
  "scripts": {
    "badges": "generateBadges"
  },
```

### :diamonds: Node

Another way is to directly use the package:

```javascript
import { generateBadges } from 'node-jest-badges';

(async () => {
  await generateBadges();
})();
```

## Thanks

Big thanks to [Shield](https://github.com/badges/shields) for this awesome tool!
